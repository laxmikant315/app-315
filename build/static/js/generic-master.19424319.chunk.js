(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{405:function(e,t,a){"use strict";a.r(t);var n=a(29),c=a(0),r=a.n(c),l=r.a.createContext({model:{details:[]},visibleModify:!0}),i=a(30),o=a(51),d=a.n(o),s=a(161),u=a(75),m=a(407),E=a(333),f=a(335),p=a(348),I=a(63),b=a(11),v=a(131),O=a(53),y=a.n(O),T=v.apiUrl+"generic-master/",h=function(e){return y.a.get(T+e).then(function(e){return e.data}).catch(function(e){console.log(e)})},g=E.a.create({name:"horizontal_login"})(function(e){var t=e.form,a=t.getFieldDecorator,n=t.setFieldsValue,o=t.getFieldInstance,v=Object(c.useContext)(l),O=v.state,y=v.dispatch,T=function(){var e=Object(u.a)(d.a.mark(function e(t){var a,c,r,l;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.currentTarget.value)||a===O.model.code){e.next=7;break}return e.next=4,h(a);case 4:(c=e.sent)?(r=c.details,l=Object(s.a)(c,["details"]),y({type:"SET_HEADER",header:l}),n({description:l.description,status:l.status}),y({type:"SET_ITEMS",items:r})):(m.a.info("Record Not found. You can create new one."),y({type:"RESET"}),y({type:"SET_HEADER",header:{code:a,status:"ACTIVE"}}),n({code:a})),console.log(c);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)(function(){O.model.code||(n({code:"",description:"",status:"ACTIVE"}),o("code").focus())},[O.model.code]),r.a.createElement("div",null,r.a.createElement(E.a,{layout:"inline",style:{padding:"5px 10px"}},r.a.createElement(E.a.Item,{label:"Group"},a("code",{rules:[{required:!0,message:"Please enter Code"}]})(r.a.createElement(f.a,{autoFocus:!0,onBlur:T,onPressEnter:function(){o("code").blur()},placeholder:"Code"}))),r.a.createElement(E.a.Item,null,a("description",{rules:[{required:!0,message:"Please enter Description"}]})(r.a.createElement(f.a,{type:"textarea",placeholder:"Description",onInput:function(e){y({type:"SET_HEADER",header:Object(i.a)({},O.model.header,{description:e.currentTarget.value})})}}))),r.a.createElement(E.a.Item,null,a("status",{initialValue:"ACTIVE"})(r.a.createElement(p.a.Group,{onChange:function(e){y({type:"SET_HEADER",header:Object(i.a)({},O.model.header,{status:e.target.value})})}},r.a.createElement(p.a,{value:"ACTIVE"},"Active"),r.a.createElement(p.a,{value:"INACTIVE"},"In-active")))),r.a.createElement(E.a.Item,null,r.a.createElement(I.a,{type:"ghost",onClick:function(){y({type:"TOGGLE_MODIFY"})}},r.a.createElement(b.a,{type:"plus"})))))}),j=a(57),x=a(52),D=function(e){var t=Object(c.useContext)(l),a=t.state,i=t.dispatch,o=function(){i({type:"RESET"})},s=Object(c.useState)(!1),E=Object(n.a)(s,2),f=E[0],p=E[1];return r.a.createElement(j.a,{className:"bg-white py-1"},r.a.createElement(I.a,{disabled:!a.model.code,type:"primary",loading:f,onClick:function(){var t=Object(u.a)(d.a.mark(function t(n){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.model.code&&(console.log(e),e.headerForm.current.validateFields(function(e,t){var n,c=a.model.details;if(!e){if(!(c&&c.length>0))return void m.a.warn("Please add atleast one record.");p(!0),(n=a.model,n.id?y.a.patch(T+n.id,n):y.a.post(T+"",n)).then(function(e){m.a.success("Record saved successfully."),o()}).catch(function(e){m.a.error(e.toString())}).finally(function(){p(!1)})}}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},"Save"),r.a.createElement(I.a,{type:"ghost",onClick:function(){o()},disabled:!a.model.code},"Cancel"),r.a.createElement(I.a,{type:"ghost",disabled:!a.model.code},"Print"),r.a.createElement(x.b,{to:"/"},r.a.createElement(I.a,{type:"danger"},"Exit")))},C=a(58),_=a(174),w=a(404),A=C.a.Content,M=function(){var e=Object(c.useContext)(l),t=e.state,a=e.dispatch,n=function(e,t){a({type:"EDIT_ITEM",item:e,index:t}),a({type:"TOGGLE_MODIFY",item:e,index:t})},o=[{title:"Code",dataIndex:"code",sorter:!0,width:"20%"},{title:"Description",dataIndex:"description",sorter:!0},{title:"Status",dataIndex:"status",filters:[{text:"Active",value:"active"},{text:"In-active",value:"inactive"}],width:"20%"},{title:"Action",key:"action",render:function(e,t,c){return r.a.createElement(_.a,{title:"Delete",placement:"right"},r.a.createElement(I.a,{onClick:function(){t.id?a({type:"UPDATE_ITEM",index:c,item:Object(i.a)({},t,{flag:"D"})}):a({type:"REMOVE_ITEM",index:c})},size:"small",type:"danger"},r.a.createElement(b.a,{type:"close"})," Delete"),r.a.createElement(I.a,{onClick:function(){return n(t,c)},size:"small",type:"default"},r.a.createElement(b.a,{type:"edit"})," Edit"))},width:"15%"}];return r.a.createElement(A,{style:{overflow:"auto"}},t.model.details&&r.a.createElement(w.a,{columns:o,size:"small",rowKey:function(e){return e.code},dataSource:t.model.details.filter(function(e){return"D"!==e.flag}),scroll:{y:"calc(100vh - 225px)"},pagination:!1,onRow:function(e,t){return{onDoubleClick:function(){return n(e,t)}}}}))},F=a(154),S=a(160),R=function(e,t){switch(t.type){case"SET_ITEMS":return Object(i.a)({},e,{model:Object(i.a)({},e.model,{details:t.items})});case"SET_HEADER":return Object(i.a)({},e,{model:Object(i.a)({},e.model,t.header)});case"ADD_ITEM":return Object(i.a)({},e,{model:Object(i.a)({},e.model,{details:[].concat(Object(S.a)(e.model.details),[t.item])})});case"REMOVE_ITEM":var a=e.model.details;return a.splice(t.index,1),console.log(a),Object(i.a)({},e,{model:Object(i.a)({},e.model,{details:a})});case"RESET":return Object(i.a)({},e,{model:{details:[]},reset:!0});case"RESET_DONE":return Object(i.a)({},e,{reset:!1});case"EDIT_ITEM":return Object(i.a)({},e,{model:Object(i.a)({},e.model,{editItem:t.item,editIndex:t.index})});case"TOGGLE_MODIFY":return Object(i.a)({},e,{visibleModify:!e.visibleModify});case"UPDATE_ITEM":var n=e.model.details,c=e.model.details[t.index];return c=Object(i.a)({},c,t.item),n[t.index]=c,Object(i.a)({},e,{model:Object(i.a)({},e.model,{details:n,editItem:null,editIndex:null})});default:return e}},k=a(406),V=(C.a.Content,E.a.create({name:"horizontal_login"})(function(e){var t=e.item,a=e.form,n=a.getFieldDecorator,i=a.setFieldsValue,o=a.validateFields,d=a.resetFields;t||(t={});var s=Object(c.useContext)(l),u=s.dispatch,I=s.state;return Object(c.useEffect)(function(){a.getFieldInstance("code")&&a.getFieldInstance("code").focus()},[I]),Object(c.useEffect)(function(){if(I.model.editItem){var e=I.model.editItem,t=e.code,n=e.description,c=e.status;i({code:t,description:n,status:c})}a.getFieldInstance("code")&&a.getFieldInstance("code").focus()},[I.model.editItem]),r.a.createElement(k.a,{visible:I.visibleModify,width:300,transitionName:"zoom",title:I.model.editItem?"Edit":"Add New",okText:"Create",onCancel:function(){u({type:"TOGGLE_MODIFY"})},onOk:function(e){e.preventDefault(),o(function(e,t){if(!e){if(I.model.editItem)u({type:"UPDATE_ITEM",item:t,index:I.model.editIndex});else{if(I.model.details.find(function(e){return e.code===t.code}))return void m.a.warn("Code is already exists.");u({type:"ADD_ITEM",item:t})}d(),u({type:"TOGGLE_MODIFY"})}})}},r.a.createElement(E.a,{layout:"vertical"},r.a.createElement(E.a.Item,{label:"Code"},n("code",{rules:[{required:!0,message:"Please enter Code"}]})(r.a.createElement(f.a,{autoFocus:!0}))),r.a.createElement(E.a.Item,{label:"Description"},n("description",{rules:[{required:!0,message:"Please enter Description"}]})(r.a.createElement(f.a,{type:"textarea"}))),r.a.createElement(E.a.Item,{className:"collection-create-form_last-form-item"},n("status",{initialValue:"ACTIVE"})(r.a.createElement(p.a.Group,null,r.a.createElement(p.a,{value:"ACTIVE"},"Active"),r.a.createElement(p.a,{value:"INACTIVE"},"In-active"))))))}));a.d(t,"default",function(){return G});var G=function(e){var t=Object(c.useReducer)(R,{model:{details:[]}}),a=Object(n.a)(t,2),i=a[0],o=a[1],d=Object(c.useRef)(null);return r.a.createElement(F.a,null,r.a.createElement(l.Provider,{value:{state:i,dispatch:o}},r.a.createElement(C.a,{className:"h-full"},r.a.createElement(g,{ref:d}),r.a.createElement(M,null),r.a.createElement(D,{headerForm:d}),r.a.createElement(V,null))))}}}]);
//# sourceMappingURL=generic-master.19424319.chunk.js.map